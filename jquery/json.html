<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="show">

    </div>
    <button data-page="cont.html">Get page one</button>
    <button data-page="cont2.html">Get page two</button>
    <button onclick="getRes()">Get resp</button>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script>
        /** 
        $(function(){
           $.getJSON('users.json',function(data){
                console.log(data);
            
                var content='';
                for(var x in data){
                    content+= "<div>"+data[x].username+"</div>";
                }
                console.log(content);
                $("#show").html(content);
            });
            $.ajax({
                url : 'users.json',
                dataType:'json',
                cache: false,
                success : function(data,status){
                    console.log(data);
                    console.log(status);
                        /**var content='';
                        for(var x in data){
                            content+= "<div>"+data[x].username+"</div>";
                        }
                        console.log(content);
                        $("#show").html(content);
                        $.each(data,function(index){
                            $("#show").append("<div>"+data[index].username+"</div>")
                        });
                },
                error : function (xhr,textStatus,err){
                    console.log(xhr);
                    console.log(textStatus);
                    console.log(err);
                    
                }

            })
            
        });

        /**
        let myJson ='{"username":"hussein","age":20}';
        let myJs=JSON.parse(myJson);
        document.getElementById("name").innerHTML='My name is '+myJs.username;
        document.getElementById("age").innerHTML='My age '+myJs.age;





        let myJsObject ={username:"hussein",age:20};
        let myJsonObject=JSON.stringify(myJsObject);
        console.log(myJsObject);
        console.log(typeof(myJsObject));


        console.log(myJsonObject);
        console.log(typeof(myJsonObject));**/

function getRes(){
    var myRequest= new XMLHttpRequest();
    // on ready state change => function called when ready state change 
    console.log(myRequest);
        myRequest.onreadystatechange = function(){
            //console.log(this.readyState +" "+ this.status);
            /*
            ready state => the state of the request 
            [0] : request not Initialized
            [1] : server connection stablished (sucess)
            [2] : request recieved
            [3] : processing request
            [4] : request is finished and response is ready
            status => Response status code
            [200] OK
            */
           //if request is finshed and response is ready and status code is 200 (OK) output the respnonse text
                if(this.readyState===4 && this.status===200){
                    console.log(this.responseText);
                    //console.log(JSON.parse(this.responseText));
                    // convert ResponseText to JS Object
                //     var myJsonObject= JSON.parse(this.responseText);
                //     myText='';
                //     //console.log(myJsonObject);
                //     for(var i=0 ; i<myJsonObject.length;i++){
                //         myText+=myJsonObject[i].username+'<br>';
                //         //console.log(myJsonObject[i]);
                //     }
                //     console.log(myText);
                //     document.getElementById("show").innerHTML=myText;
                // }
        }
        
    };
        // XMLHttpRequest.open(Method , URL , Async ,user ,password)
        //console.log(myRequest);
        myRequest.open("POST","auth.php",true);
        myRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
        myRequest.send("name=hussein&lastlogin=Today");

}
// $(function(){
//     $("button").on("click",function(){
//         $("#show").load($(this).data("page")+" .con",function(resTxt,stTxt,xhr){
//             if(stTxt=="success"){
//                 console.log(resTxt);
//                 console.log("data loaded");
//             }
//         });
//     });
    // $.get("aut.php?name=hussein&lastlogin=tommorrow",function(data , status ,xhr){
    //     console.log(data);
    //     console.log(status);
    //     console.log(xhr);
    // });
    // $.post("aut.php",{name:"hussein",lastlogin:"today"},function(data,status,xhr){
    //     console.log(data);
    //     console.log(status);
    //     console.log(xhr);
    // });
    
// });
$.ajax({
    //dataType :"html",//data expected from the server response,Deafult is Intel Guess
    method:"POST", // Method used for the request
    // cache: false,//cache the request,deafult is true
    // async:false, //Asynchronous or no
    //timeout : 3000, //time out for the requset
    // username:"user",//for authentication
    // password:"pass",//for authentication
    //contentType: '',//content type of the requset ,Deafult is application/x-www-form-urlencoded
    url :"comments.php", //url to send the data,Deafult is current url
    data : {comment:"iam hussein "},// data to send with request
    beforeSend:function(xhr){
        console.log("before send");
    },
    success : function(data,status,xhr){ // function to run if request succeed
        console.log(data);
        console.log(status);
        console.log("success");
        $('#show').html(data);
        
    },error : function(xhr ,status ,error){
        console.log(xhr);//xhr object
        console.log(status);//requset status
        console.log(error);//error message
        console.log("error");
    },
    complete: function(xhr,status){
        //function to run when function is complete 
        console.log(xhr);//xhr object
        console.log(status);//requset status
        console.log("complete");
    }

});
    </script>
</body>
</html>